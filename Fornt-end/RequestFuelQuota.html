<!DOCTYPE html>
<html>
<head>
    <title>Request Fuel Quota</title>
    <!-- <link rel="stylesheet" href="style.css">  Ensure this link is correct -->
</head>
<body>
    <h2>Request Fuel Quota</h2>
    <form id="fuelQuotaForm">
        <label for="gallonsRequested">How many Gallons do you need:</label>
        <input type="number" id="gallonsRequested" name="gallonsRequested" required><br><br>

        <label for="deliveryAddress">Delivery Address:</label>
        <input type="text" id="deliveryAddress" name="deliveryAddress" readonly><br><br>

        <button type="button" id="changeAddressBtn">Request address</button><br><br>

        <div id="newAddressContainer" style="display:none;">
            <label for="newAddress">Input new address:</label>
            <input type="text" id="newAddress" name="newAddress"><br>
            <button type="button" id="confirmAddressBtn">Confirm New Address</button><br><br>
        </div>

        <label for="deliveryDate">Request Delivery Date:</label>
        <input type="date" id="deliveryDate" name="deliveryDate" required><br><br>

        <button type="submit" id="completeInfoBtn">Complete Info</button>
    </form>

    <script>
        document.getElementById('changeAddressBtn').addEventListener('click', function() {
            document.getElementById('newAddressContainer').style.display = 'block';
        });

        document.getElementById('confirmAddressBtn').addEventListener('click', function() {
            var newAddress = document.getElementById('newAddress').value;
            if(newAddress) {
                document.getElementById('deliveryAddress').value = newAddress;
                document.getElementById('newAddressContainer').style.display = 'none'; // Optionally hide the new address input after confirmation
            } else {
                alert('Please enter a new address.');
            }
        });

        document.getElementById('fuelQuotaForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const gallonsRequested = document.getElementById('gallonsRequested').value;
            const deliveryAddress = document.getElementById('deliveryAddress').value || document.getElementById('newAddress').value;
            const deliveryDate = document.getElementById('deliveryDate').value;

            // Save the data to localStorage
            const fuelRequestData = {
                gallonsRequested,
                deliveryAddress,
                deliveryDate
            };

            localStorage.setItem('fuelRequestData', JSON.stringify(fuelRequestData));

            // Redirect to Profile.html or another page as needed
            window.location.href = 'Profile.html';
        });

        window.onload = function() {
            var storedInfo = localStorage.getItem('userInfo');
            if(storedInfo) {
                var userInfo = JSON.parse(storedInfo);
                document.getElementById('deliveryAddress').value = userInfo.address1 || '';
            }
        };
    </script>
</body>
</html>
