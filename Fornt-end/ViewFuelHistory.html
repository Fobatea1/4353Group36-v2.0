<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>View Fuel History</title>
    <link rel="stylesheet" href="ViewHistory.css">
    <script src="HistoryManager.js" defer></script>
</head>
<body>
    <header>
        <h2 class="logo">hey</h2>
        <nav class="navigation">
            <a href="index.html">Home</a>
            <a href="Profile.html">Profile</a>
            <a href="#">Services</a>
            <a href="#">Quaso</a>
        </nav>
    </header>
    <div class="historyWrapper">
        <h2>Fuel Request History</h2>
        <div id="fuelHistoryContainer"></div>
    </div>
    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
        <button onclick="clearHistory()" class="btn">Clear History</button>
        <button onclick="viewProfile()" class="btn">View Profile</button>
        <button onclick="requestFuel()" class="btn">Request Fuel Quota</button>
    </div>
    <script>
        function displayFuelHistory() {
            const historyContainer = document.getElementById('fuelHistoryContainer');
            const fuelRequestHistory = [
                {
                    "requestNumber": 1,
                    "gallonsRequested": 50,
                    "fuelType": "Unleaded",
                    "totalAmountDue": 150,
                    "deliveryAddress": "123 Main St",
                    "deliveryDate": "2022-01-01",
                    "stateDelivery": "Texas"
                },
                {
                    "requestNumber": 2,
                    "gallonsRequested": 100,
                    "fuelType": "Diesel",
                    "totalAmountDue": 300,
                    "deliveryAddress": "456 Elm St",
                    "deliveryDate": "2022-02-01",
                    "stateDelivery": "Fuckall"
                }
            ];

            if (fuelRequestHistory && fuelRequestHistory.length > 0) {
                const table = document.createElement('table');
                table.setAttribute('border', '1');
                const thead = document.createElement('thead');
                const tbody = document.createElement('tbody');

                const headRow = document.createElement('tr');
                ['Request #', 'Gallons Requested', 'Fuel Type', 'Total Amount Due', 'Delivery Address', 'State','Delivery Date', ].forEach(heading => {
                    const th = document.createElement('th');
                    th.textContent = heading;
                    headRow.appendChild(th);
                });

                thead.appendChild(headRow);
                table.appendChild(thead);

                fuelRequestHistory.forEach((entry) => {
                    const newRow = document.createElement('tr');

                    const requestNumberCell = document.createElement('td');
                    requestNumberCell.textContent = entry.requestNumber;
                    newRow.appendChild(requestNumberCell);

                    ['gallonsRequested', 'fuelType', 'totalAmountDue', 'deliveryAddress', 'stateDelivery', 'deliveryDate'].forEach(key => {
                        const td = document.createElement('td');
                        td.textContent = entry[key];
                        newRow.appendChild(td);
                    });

                    tbody.appendChild(newRow);
                });

                table.appendChild(tbody);
                historyContainer.appendChild(table);
            } else {
                historyContainer.innerHTML = "<p>No fuel request history.</p>";
            }
        }

        function clearHistory() {
            if(confirm("Are you sure you want to clear all fuel history?")) {
                HistoryManager.clearHistory();
                displayFuelHistory(); // Refreshthe history display
            }
        }

        function viewProfile() {
            window.location.href = 'Profile.html';
        }

        function requestFuel() {
            window.location.href = 'RequestFuelQuota.html';
        }

        window.onload = displayFuelHistory;
    </script>
</body>
</html>